"use client"

import { useState } from 'react'
import { User, Phone, Shield, Calendar, CreditCard, Key, QrCode, Building2, Mail, MapPin } from 'lucide-react'
import type { UserProfile } from '@/types/auth-store'

interface CredentialCardProps {
  employeeData: UserProfile & {
    imss_number?: string;
    system_username?: string;
    system_password?: string;
    system_access_password?: string;
    plants?: {
      name: string;
      contact_phone?: string;
      contact_email?: string;
      address?: string;
    };
    emergency_contact?: {
      name: string;
      relationship: string;
      phone: string;
    };
  };
  showBoth?: boolean;
  companyInfo?: {
    name: string;
    address: string;
    phone: string;
    email: string;
  };
}

const defaultCompanyInfo = {
  name: "DC CONCRETOS",
  address: "Calle Caracas #12428 Fracc. El Paraíso, C.P. 22106",
  phone: "664 905 1813",
  email: "rh.tj@dcconcretos.com.mx"
}

export function CredentialCard({ 
  employeeData, 
  showBoth = false, 
  companyInfo = defaultCompanyInfo 
}: CredentialCardProps) {
  const [currentView, setCurrentView] = useState<'front' | 'back'>('front');

  const formatEmployeeId = (code: string | null | undefined) => {
    if (!code) return 'DC-2025-001';
    return code.startsWith('DC-') ? code : `DC-${new Date().getFullYear()}-${code}`;
  };

  const getSystemCredentials = () => {
    return {
      username: employeeData.system_username || employeeData.email || `${employeeData.nombre?.toLowerCase()}.${employeeData.apellido?.toLowerCase()}@dcconcretos.com.mx`,
      password: employeeData.system_access_password || employeeData.system_password || 'Planta01DC'
    };
  };

  const CredentialCardFront = () => (
    <div className="w-[300px] h-[400px] bg-white rounded-lg shadow-lg overflow-hidden border-2 border-gray-200 print-card relative">
      {/* Header Section - Professional */}
      <div className="bg-gray-50 h-[70px] flex flex-col items-center justify-center px-4 py-2">
    frontCard.style.cssText = `
      width: 300px;
      height: 400px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    `;

    // Create back card element
    const backCard = document.createElement('div');
    backCard.style.cssText = `
      width: 300px;
      height: 400px;
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    `;

    // Add content to front card (simplified HTML)
    frontCard.innerHTML = `
      <div style="background: #f9fafb; height: 70px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px;">
        <div style="width: 112px; height: 32px; display: flex; align-items: center; justify-content: center;">
          <img src="/logo.png" alt="DC CONCRETOS" style="width: 100%; height: 100%; object-fit: contain;" />
        </div>
        <div style="height: 1px; width: 100%; background: #e5e7eb; margin-top: 8px;"></div>
      </div>
      <div style="display: flex; justify-content: center; padding: 24px;">
        <div style="width: 112px; height: 112px; border-radius: 50%; border: 2px solid #e5e7eb; background: #f3f4f6; display: flex; align-items: center; justify-content: center;">
          ${employeeData.avatar_url ? `<img src="${employeeData.avatar_url}" alt="${employeeData.nombre} ${employeeData.apellido}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;" />` : `<svg width="40" height="40" fill="#9ca3af" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>`}
        </div>
      </div>
      <div style="padding: 0 24px 16px 24px;">
        <div style="text-align: center; margin-bottom: 16px;">
          <h2 style="font-size: 16px; font-weight: bold; color: #111827; margin: 0;">${employeeData.nombre} ${employeeData.apellido}</h2>
          <p style="font-size: 11px; color: #6b7280; margin: 4px 0 0 0;">${employeeData.position || 'Empleado'}</p>
        </div>
        <div style="space-y: 4px; font-size: 11px;">
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
            <span style="color: #6b7280; font-medium;">Cargo</span>
            <span style="font-weight: 600; color: #111827;">${employeeData.position || 'Empleado'}</span>
          </div>
          <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
          <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
            <span style="color: #6b7280; font-medium;">Ingreso</span>
            <span style="font-weight: 600; color: #111827;">${employeeData.hire_date ? new Date(employeeData.hire_date).toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' }) : 'N/A'}</span>
          </div>
          ${employeeData.imss_number ? `
            <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">IMSS</span>
              <span style="font-family: monospace; font-weight: 600; color: #111827;">${employeeData.imss_number}</span>
            </div>
          ` : ''}
        </div>
      </div>
    `;

    // Add content to back card (simplified HTML)
    backCard.innerHTML = `
      <div style="background: #f9fafb; height: 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 8px;">
        <div style="width: 112px; height: 32px; display: flex; align-items: center; justify-content: center;">
          <img src="/logo.png" alt="DC CONCRETOS" style="width: 100%; height: 100%; object-fit: contain;" />
        </div>
        <div style="height: 1px; width: 100%; background: #e5e7eb; margin-top: 8px;"></div>
      </div>
      <div style="padding: 24px 24px 16px 24px;">
        <div style="margin-bottom: 12px;">
          <h3 style="font-weight: 600; color: #111827; font-size: 11px; margin-bottom: 6px; text-transform: uppercase; text-align: center; letter-spacing: 0.5px;">
            INFORMACIÓN PERSONAL
          </h3>
          <div style="space-y: 4px; font-size: 11px;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">Correo</span>
              <span style="font-family: monospace; color: #111827;">${employeeData.email || 'N/A'}</span>
            </div>
            ${employeeData.telefono ? `
              <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
                <span style="color: #6b7280; font-medium;">Teléfono</span>
                <span style="font-family: monospace; color: #111827;">${employeeData.telefono}</span>
              </div>
            ` : ''}
          </div>
        </div>

        <div style="margin-bottom: 12px;">
          <h3 style="font-weight: 600; color: #111827; font-size: 11px; margin-bottom: 6px; text-transform: uppercase; text-align: center; letter-spacing: 0.5px;">
            ACCESO AL SISTEMA
          </h3>
          <div style="space-y: 4px; font-size: 11px;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">Contraseña</span>
              <span style="font-family: monospace; color: #111827;">${employeeData.system_access_password || employeeData.system_password || 'Planta01DC'}</span>
            </div>
          </div>
        </div>

        ${employeeData.emergency_contact ? `
          <div style="margin-bottom: 12px;">
            <h3 style="font-weight: 600; color: #111827; font-size: 11px; margin-bottom: 6px; text-transform: uppercase; text-align: center; letter-spacing: 0.5px;">
              CONTACTO DE EMERGENCIA
            </h3>
            <div style="space-y: 4px; font-size: 11px;">
              <div style="display: flex; justify-between; align-items: center; padding: 2px 0;">
                <span style="color: #6b7280; font-medium;">Teléfono</span>
                <span style="font-family: monospace; color: #111827;">${employeeData.emergency_contact.phone}</span>
              </div>
              <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
                <span style="color: #6b7280; font-medium;">Nombre</span>
                <span style="font-weight: 600; color: #111827;">${employeeData.emergency_contact.name}</span>
              </div>
              <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
                <span style="color: #6b7280; font-medium;">Relación</span>
                <span style="color: #111827;">${employeeData.emergency_contact.relationship}</span>
              </div>
            </div>
          </div>
        ` : ''}

        <div>
          <h3 style="font-weight: 600; color: #111827; font-size: 11px; margin-bottom: 6px; text-transform: uppercase; text-align: center; letter-spacing: 0.5px;">
            CONTACTO DE LA EMPRESA
          </h3>
          <div style="space-y: 4px; font-size: 11px;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">Dirección</span>
              <span style="color: #111827;">Calle Caracas #12428, El Paraíso 22106</span>
            </div>
            <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">Correo</span>
              <span style="font-family: monospace; color: #111827;">rh.tj@dcconcretos.com.mx</span>
            </div>
            <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">Teléfono</span>
              <span style="color: #111827;">664 905 1813 (Oficina)</span>
            </div>
            <div style="height: 1px; width: 100%; background: #e5e7eb;"></div>
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 2px 0;">
              <span style="color: #6b7280; font-medium;">RH</span>
              <span style="color: #111827;">477 288 0120</span>
            </div>
          </div>
        </div>
      </div>
    `;

    // Add cards to container
    container.appendChild(frontCard);
    container.appendChild(backCard);

    try {
      // Generate canvas from the container
      const canvas = await html2canvas(container, {
        scale: 3,
        useCORS: true,
        allowTaint: true,
        backgroundColor: '#ffffff',
        width: 300,
        height: 800,
        scrollX: 0,
        scrollY: 0
      });

      // Create PDF
      const imgData = canvas.toDataURL('image/png');
      const pdf = new jsPDF({
        orientation: 'portrait',
        unit: 'mm',
        format: [85.6, 53.98] // Standard credit card size in mm
      });

      // Calculate dimensions to fit the card
      const cardWidth = 85.6;
      const cardHeight = 53.98;
      const imgWidth = canvas.width;
      const imgHeight = canvas.height;
      const ratio = Math.min(cardWidth / imgWidth, cardHeight / imgHeight);

      const finalWidth = imgWidth * ratio;
      const finalHeight = imgHeight * ratio;
      const x = (cardWidth - finalWidth) / 2;
      const y = (cardHeight - finalHeight) / 2;

      pdf.addImage(imgData, 'PNG', x, y, finalWidth, finalHeight);

      // Download the PDF
      const filename = `credencial-${employeeData.nombre}-${employeeData.apellido}.pdf`;
      pdf.save(filename);

      // Clean up
      document.body.removeChild(container);

      toast.success('PDF descargado exitosamente');
    } catch (error) {
      console.error('Error generating PDF:', error);
      toast.error('Error al generar el PDF');
      // Clean up on error
      document.body.removeChild(container);
    }
  };

  const CredentialCardFront = () => (
    <div className="w-[300px] h-[400px] bg-white rounded-lg shadow-lg overflow-hidden border-2 border-gray-200 print-card relative">
      {/* Header Section - Professional */}
      <div className="bg-gray-50 h-[70px] flex flex-col items-center justify-center px-4 py-2">
        <div className="w-28 h-8 flex items-center justify-center">
          <img
            src="/logo.png"
            alt="DC CONCRETOS"
            className="w-full h-full object-contain"
          />
        </div>
        <div className="h-px w-full bg-gray-200 mt-2"></div>
      </div>

      {/* Professional Photo Section */}
      <div className="flex justify-center py-6">
        <div className="w-28 h-28 rounded-full border-2 border-gray-200 bg-gray-50 flex items-center justify-center overflow-hidden">
          {employeeData.avatar_url ? (
            <img
              src={employeeData.avatar_url}
              alt={`${employeeData.nombre} ${employeeData.apellido}`}
              className="w-full h-full object-cover"
            />
          ) : (
            <User size={40} className="text-gray-300" />
          )}
        </div>
      </div>
      
      {/* Employee Information - Executive Style */}
      <div className="px-6 pb-4">
        {/* Name Section */}
        <div className="text-center space-y-1 pt-4">
          <h2 className="text-base font-bold text-gray-900 leading-tight">
            {employeeData.nombre} {employeeData.apellido}
          </h2>
          <p className="text-gray-600 font-medium text-[11px]">
            {employeeData.position || 'Empleado'}
          </p>
        </div>

        {/* Details - Compact */}
        <div className="space-y-1 text-[11px] mt-4">
          <div className="flex justify-between items-center py-0.5">
            <span className="text-gray-500 font-medium">Cargo</span>
            <span className="font-semibold text-gray-900 text-[10px]">
              {employeeData.position || 'Empleado'}
            </span>
          </div>
          <div className="h-px w-full bg-gray-200"></div>
          <div className="flex justify-between items-center py-0.5">
            <span className="text-gray-500 font-medium">Ingreso</span>
            <span className="font-semibold text-gray-900 text-[10px]">
              {employeeData.hire_date ? new Date(employeeData.hire_date).toLocaleDateString('es-MX', { day: '2-digit', month: '2-digit', year: 'numeric' }) : 'N/A'}
            </span>
          </div>
          {employeeData.imss_number && (
            <>
              <div className="h-px w-full bg-gray-200"></div>
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">IMSS</span>
                <span className="font-mono font-semibold text-gray-900 text-[10px]">
                  {employeeData.imss_number}
                </span>
              </div>
            </>
          )}
        </div>
      </div>
      
      {/* Footer removed per request (header already contains brand) */}
    </div>
  );

  const CredentialCardBack = () => {
    const credentials = getSystemCredentials();
    const username = credentials.username || '';
    const email = (employeeData.email || '').toLowerCase();
    const showUsername = username.toLowerCase() !== email && Boolean(username);
    
    return (
      <div className="w-[300px] h-[400px] bg-white rounded-lg shadow-lg overflow-hidden border-2 border-gray-200 print-card relative">
        {/* Header with Logo */}
        <div className="bg-gray-50 h-[50px] flex flex-col items-center justify-center px-4 py-2">
          <div className="w-28 h-8">
            <img
              src="/logo.png"
              alt="DC CONCRETOS"
              className="w-full h-full object-contain"
            />
          </div>
          <div className="h-px w-full bg-gray-200 mt-2"></div>
        </div>

        {/* Employee Personal Information - Compact */}
        <div className="px-6 py-2">
          <div className="p-0 mb-2">
            <h3 className="font-semibold text-gray-800 text-[10px] mb-1.5 uppercase tracking-wider text-center">
              INFORMACIÓN PERSONAL
            </h3>
            <div className="space-y-1 text-[11px]">
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">Correo</span>
                <span className="font-mono text-gray-900 text-[10px] max-w-[190px] truncate">
                  {employeeData.email || 'N/A'}
                </span>
              </div>
              {employeeData.telefono && (
                <>
                  <div className="h-px w-full bg-gray-200"></div>
                  <div className="flex justify-between items-center py-0.5">
                    <span className="text-gray-500 font-medium">Teléfono</span>
                    <span className="font-mono text-gray-900 text-[10px]">{employeeData.telefono}</span>
                  </div>
                </>
              )}
            </div>
          </div>

          {/* System Access - Compact */}
          <div className="mb-2">
            <h3 className="font-semibold text-gray-800 text-[10px] mb-1.5 uppercase tracking-wider text-center">
              ACCESO AL SISTEMA
            </h3>
            <div className="space-y-1 text-[11px]">
              {showUsername && (
                <>
                  <div className="flex justify-between items-center py-0.5">
                    <span className="text-gray-500 font-medium">Usuario</span>
                    <span className="font-mono text-gray-900 text-[10px]">{credentials.username}</span>
                  </div>
                  <div className="h-px w-full bg-gray-200"></div>
                </>
              )}
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">Contraseña</span>
                <span className="font-mono text-gray-900 text-[10px]">{credentials.password}</span>
              </div>
            </div>
          </div>

          {/* Emergency Contact - Compact */}
          <div className="mb-2">
            <h3 className="font-semibold text-gray-800 text-[10px] mb-1.5 uppercase tracking-wider text-center">
              CONTACTO DE EMERGENCIA
            </h3>
            {employeeData.emergency_contact ? (
              <div className="space-y-1 text-[11px]">
                <div className="flex justify-between items-center py-0.5">
                  <span className="text-gray-500 font-medium">Teléfono</span>
                  <span className="font-mono text-gray-900 text-[10px]">{employeeData.emergency_contact.phone}</span>
                </div>
                <div className="h-px w-full bg-gray-200"></div>
                <div className="flex justify-between items-center py-0.5">
                  <span className="text-gray-500 font-medium">Nombre</span>
                  <span className="font-semibold text-gray-900 text-[10px]">{employeeData.emergency_contact.name}</span>
                </div>
                <div className="h-px w-full bg-gray-200"></div>
                <div className="flex justify-between items-center py-0.5">
                  <span className="text-gray-500 font-medium">Relación</span>
                  <span className="text-gray-900 text-[10px]">{employeeData.emergency_contact.relationship}</span>
                </div>
              </div>
            ) : (
              <div className="text-[11px] text-gray-500 text-center">No registrado</div>
            )}
          </div>

          {/* Company Contact - Compact */}
          <div>
            <h3 className="font-semibold text-gray-800 text-[10px] mb-1.5 uppercase tracking-wider text-center">
              CONTACTO DE LA EMPRESA
            </h3>
            <div className="space-y-1 text-[11px]">
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">Dirección</span>
                <span className="text-gray-900 text-[10px]">Calle Caracas #12428, El Paraíso 22106</span>
              </div>
              <div className="h-px w-full bg-gray-200"></div>
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">Correo</span>
                <span className="font-mono text-gray-900 text-[10px]">rh.tj@dcconcretos.com.mx</span>
              </div>
              <div className="h-px w-full bg-gray-200"></div>
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">Teléfono</span>
                <span className="text-gray-900 text-[10px]">664 905 1813 (Oficina)</span>
              </div>
              <div className="h-px w-full bg-gray-200"></div>
              <div className="flex justify-between items-center py-0.5">
                <span className="text-gray-500 font-medium">RH</span>
                <span className="text-gray-900 text-[10px]">477 288 0120</span>
              </div>
            </div>
          </div>
        </div>
        
        {/* Footer removed per request (header already contains brand) */}
      </div>
    );
  };

  return (
    <div className="space-y-8">
      {/* Print Styles */}
      <style jsx global>{`
        @media print {
          /* Hide everything except the credential cards container */
          body * {
            visibility: hidden;
          }
          .print-card, .print-stack, .print-stack * {
            visibility: visible;
          }

          /* Stack cards vertically for sequential printing */
          .print-stack {
            display: block !important;
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 3.375in !important;
            height: auto !important;
            margin: 0 !important;
            padding: 0 !important;
          }
          .print-stack .print-card {
            position: relative !important;
            display: block !important;
            width: 100% !important;
            height: 5.25in !important;
            margin: 0 !important;
            padding: 0 !important;
            transform: scale(var(--print-scale, 0.9)) !important;
            transform-origin: top center;
            page-break-after: always;
            box-shadow: none !important;
            border: 1px solid #ccc !important;
            background: white !important;
          }
          .print-stack .print-card:last-child {
            page-break-after: auto;
          }

          /* Page size tuned to card - Standard staff card size */
          @page {
            size: 3.375in 5.25in;
            margin: 0.15in;
          }

          /* Ensure brand colors print */
          .print-card {
            -webkit-print-color-adjust: exact !important;
            print-color-adjust: exact !important;
            font-size: 9px !important;
          }
          .print-card .section-title {
            font-size: 8px !important;
          }
          .print-card .chip {
            font-size: 8px !important;
          }

          /* Hide UI controls */
          .print\\:hidden {
            display: none !important;
          }

          /* Prevent page breaks within cards */
          .print-card * {
            page-break-inside: avoid;
          }
        }

        /* Screen preview */
        @media screen {
          .print-card { box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
        }
      `}</style>

      {/* View Toggle */}
      <div className="flex justify-center print:hidden">
        <div className="bg-white rounded-lg p-1 shadow-sm border inline-flex">
          <button
            onClick={() => setCurrentView('front')}
            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
              currentView === 'front'
                ? 'bg-blue-500 text-white shadow-sm'
                : 'text-gray-600 hover:text-gray-900'
            }`}
          >
            {showBoth ? 'Lado Frontal' : 'Solo Frente'}
          </button>
          <button
            onClick={() => setCurrentView('back')}
            className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
              currentView === 'back'
                ? 'bg-blue-500 text-white shadow-sm'
                : 'text-gray-600 hover:text-gray-900'
            }`}
          >
            Lado Posterior
          </button>
        </div>
      </div>

      {/* Credential Display */}
      <div className="flex justify-center items-center print-stack" style={{
        // Allow runtime scaling and margins in print via CSS variables
        // Users can adjust with: document.documentElement.style.setProperty('--print-scale','0.95')
        // and: document.documentElement.style.setProperty('--print-margin','0.2in')
        // No effect on screen
      }}>
        {/* Print Scale Controls */}
        <div className="print:hidden fixed top-4 right-4 bg-white rounded-lg shadow-lg border p-3 space-y-2">
          <div className="text-sm font-medium text-gray-700">Ajuste de Impresión</div>
          <div className="flex items-center gap-2">
            <label className="text-xs text-gray-600">Escala:</label>
            <input
              type="range"
              min="0.8"
              max="1.2"
              step="0.02"
              defaultValue="1.05"
              onChange={(e) => {
                document.documentElement.style.setProperty('--print-scale', e.target.value);
              }}
              className="w-20"
            />
          </div>
          <div className="flex items-center gap-2">
            <label className="text-xs text-gray-600">Margen:</label>
            <select
              onChange={(e) => {
                document.documentElement.style.setProperty('--print-margin', e.target.value);
              }}
              className="text-xs border rounded px-1 py-0.5"
              defaultValue="0.15in"
            >
              <option value="0.1in">Mínimo</option>
              <option value="0.15in">Normal</option>
              <option value="0.3in">Amplio</option>
            </select>
          </div>
        </div>

        {/* Print Stack - Always present but hidden on screen */}
        <div className="print-stack print:block hidden">
          <div className="print-card">
            <CredentialCardFront />
          </div>
          <div className="print-card">
            <CredentialCardBack />
          </div>
        </div>

        {/* Screen Preview */}
        <div className="print:hidden">
          {showBoth ? (
            <div className="flex gap-8 items-center">
              <div>
                <h3 className="text-sm font-medium text-green-600 mb-4 text-center">LADO FRONTAL</h3>
                <CredentialCardFront />
              </div>
              <div>
                <h3 className="text-sm font-medium text-blue-600 mb-4 text-center">LADO POSTERIOR</h3>
                <CredentialCardBack />
              </div>
            </div>
          ) : (
            <div>
              <h3 className="text-sm font-medium text-center mb-4 text-gray-600">
                {currentView === 'front' ? 'Vista Previa de Credencial' : 'Información Adicional'}
              </h3>
              {currentView === 'front' ? <CredentialCardFront /> : <CredentialCardBack />}
            </div>
          )}
        </div>
      </div>
    </div>
  );
}